#### 仿真环境配置：

[安装UBUNTU18.04 for ZROS](http://zmwiki.zongmutech.com/index.php/%E5%AE%89%E8%A3%85UBUNTU18.04_for_ZROS)

#### 仿真环境版本更新：

/*

1.拉取最新的Release对应x86版本推进虚拟机中，进行解压（scp -P 33024 软件包 zongmu@192.168.4.255:/data/Release/   密码:zongmu123）
从虚拟机拉取到本地scp -P 33024 zongmu@192.168.4.255:/data/Release/文件 本地路径 

*/

工作文件目录

smb://shfp08/

```
software safety management
```

版本拉取：build目录

```
smb://shfp07/
smartecu/DailyBuild/B_DropnGo
```

1.修改/data/Release/res/car_instance/default.xml和defaultDevice
2.修改/data/Release/res/carlasdk/carla_config.pd.txt中host为:192.168.4.255

#### 仿真环境zviz连接：

需要连接vpn后才可以使用！
1.在本地电脑浏览器进入http://192.168.4.255:33023/ ，在弹窗中输入密码：Wupan1032。
2.进入网页后，在网页中打开一个终端，进入/data/Release/bin/路径后，输入

```
./launcer --mode=simulator
```

(运行launcer并设置模式为simulator)。
3.在本地电脑中打开Foxglove,点击左上角Data source，点击Data source右测的+，在弹窗界面中依次点击:Open connection->Rosbridge(Ros 1 & 2)，修改Websocket URL为:ws://192.168.4.255:33025，点击弹窗右下角open可成功连接。

4.foxglove使用：add Panel->3D->open topic switcher->选择vehicle_outline、local_map、planning_ngp、planning_park。

#### 配置文件修改

1.playback（回放）配置文件capture_0位置(本地跑)

2.zrosbag2 :directory视频存储路径:res/zrosbag2/zrosags_shadowmode_config.xml

3.提速

res/carlasdk/carla_config.pb.txt文件的fixed_delta_seconds: 0.04， 0.04改为0.2

4./etc/zm_board_name

```
simulator_pc
```



#### 测试步骤：

(所有召唤泊车任务不能连续开启，一次功能结束之后需要重启x86系统，重新使用loc_test_node节点定位后开启功能)

###### HPP:

1.HPP建图：先进入HMI的录制地图界面，开启一个终端运行Manualcontrol节点,然后使用键盘的w(前进)、a(向左打方向)、s(后退)、d(向右打方向)控制车移动,q为停止。
2.HPP召唤泊车：进入新建的HPP地图中，开启一个终端运行loc_test_node节点输入2,输入坐标0 0 0进行定位，定位成功后进入debug，在地图上选择召唤点或泊车位进行自动驾驶

###### AVP：

1.AVP定位：进入腾飞地图，运行loc_test_node节点输入2,输入坐标8.8 35 0 13318,即可定位成功。（若没出现提示输入楼层和坐标的log，需要先设置log等级：

```
export ZROS_CONSOLE_LOG_LEVEL=1
```

2.AVP召唤：定位成功后，连续点击HMI右上角4次，进入debug模式，在地图上选择召唤点位后，点击Realy Use select pos生成全局路径，点击start开启功能
3.AVP泊车：定位成功后，连续点击HMI右上角4次，进入debug模式，在地图上选择泊车位后，点击Realy Use select pos生成全局路径，点击start开启功能
4.AVP跨层：定位成功后，连续点击HMI右上角4次，进入debug模式，在召唤点下拉框中选择跨层召唤点，点击start开启功能

###### AVP_NearBy

#### 仿真录制

```
./zrosbag2 --record --config default
在定位成功后启动
```

#### jenkins

http://192.168.90.174:8080/view/System_Safety/



